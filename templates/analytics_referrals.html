{% extends "base.html" %}

{% block title %}Referral Analytics - Sapyyn{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <h2 class="mb-4"><i class="bi bi-graph-up me-2"></i>Referral Analytics</h2>
            <p class="text-muted">This page provides a summary of referral conversions and cost per acquisition over all time.  Use these metrics to evaluate the effectiveness of your referral program.</p>
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-6 col-md-3 mb-3">
                            <h5 class="fw-bold">Total Referrals</h5>
                            <p class="display-6 text-primary">{{ total_referrals }}</p>
                        </div>
                        <div class="col-6 col-md-3 mb-3">
                            <h5 class="fw-bold">Conversions</h5>
                            <p class="display-6 text-success">{{ conversions }}</p>
                        </div>
                        <div class="col-6 col-md-3 mb-3">
                            <h5 class="fw-bold">Total Value</h5>
                            <p class="display-6 text-info">${{ '%.2f'|format(total_value) }}</p>
                        </div>
                        <div class="col-6 col-md-3 mb-3">
                            <h5 class="fw-bold">Cost / Acquisition</h5>
                            <p class="display-6 text-warning">${{ '%.2f'|format(cpa) }}</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="alert alert-info" role="alert">
                <strong>Note:</strong> The cost per acquisition is calculated as the total actual value of converted referrals divided by the number of conversions.  If no referrals have been converted, the CPA will be zero.
            </div>
        </div>
    </div>
</div>
{% endblock %}