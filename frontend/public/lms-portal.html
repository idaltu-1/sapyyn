<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Management System - Sapyyn</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/video.js@8.0.4/dist/video-js.min.css" rel="stylesheet">
    <link href="css/lms-portal.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/">
                <i class="fas fa-graduation-cap me-2"></i>Sapyyn LMS
            </a>
            <div class="navbar-nav ms-auto">
                <span class="navbar-text me-3">
                    <i class="fas fa-user me-2"></i>
                    <span id="userName">Dr. Smith</span>
                </span>
                <a class="nav-link" href="/portal">Dashboard</a>
                <a class="nav-link" href="/reward-center">Rewards</a>
                <a class="nav-link" href="#" onclick="logout()">Logout</a>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3 col-md-4 sidebar">
                <div class="sidebar-content">
                    <!-- Progress Overview -->
                    <div class="progress-card mb-4">
                        <h6 class="text-white mb-3">
                            <i class="fas fa-chart-line me-2"></i>Learning Progress
                        </h6>
                        <div class="progress-item">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Overall Completion</small>
                                <small id="overallProgress">0%</small>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-success" id="overallProgressBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="progress-item mt-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Certificates Earned</small>
                                <small id="certificatesEarned">0</small>
                            </div>
                        </div>
                        <div class="progress-item mt-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small>Total Points</small>
                                <small id="totalLearningPoints">0</small>
                            </div>
                        </div>
                    </div>

                    <!-- Course Categories -->
                    <div class="category-list">
                        <h6 class="sidebar-heading">Course Categories</h6>
                        <ul class="list-unstyled">
                            <li><a href="#" class="category-link active" data-category="all">
                                <i class="fas fa-th-large me-2"></i>All Courses
                            </a></li>
                            <li><a href="#" class="category-link" data-category="clinical">
                                <i class="fas fa-stethoscope me-2"></i>Clinical Skills
                            </a></li>
                            <li><a href="#" class="category-link" data-category="compliance">
                                <i class="fas fa-shield-alt me-2"></i>Compliance
                            </a></li>
                            <li><a href="#" class="category-link" data-category="technology">
                                <i class="fas fa-laptop me-2"></i>Technology
                            </a></li>
                            <li><a href="#" class="category-link" data-category="communication">
                                <i class="fas fa-comments me-2"></i>Communication
                            </a></li>
                            <li><a href="#" class="category-link" data-category="business">
                                <i class="fas fa-briefcase me-2"></i>Business Skills
                            </a></li>
                        </ul>
                    </div>

                    <!-- Quick Stats -->
                    <div class="quick-stats mt-4">
                        <h6 class="sidebar-heading">Quick Stats</h6>
                        <div class="stat-item">
                            <i class="fas fa-clock text-info"></i>
                            <span>Study Time: <strong id="studyTime">0h</strong></span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-trophy text-warning"></i>
                            <span>Rank: <strong id="learningRank">#-</strong></span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-fire text-danger"></i>
                            <span>Streak: <strong id="learningStreak">0 days</strong></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-9 col-md-8 main-content">
                <!-- Learning Dashboard -->
                <div id="dashboardView" class="content-view">
                    <!-- Welcome Section -->
                    <div class="welcome-section mb-4">
                        <div class="row align-items-center">
                            <div class="col-lg-8">
                                <h2 class="mb-2">Welcome back, <span id="welcomeUserName">Dr. Smith</span>!</h2>
                                <p class="text-muted mb-3">Continue your learning journey and earn rewards</p>
                                <div class="quick-actions">
                                    <button class="btn btn-primary me-2" onclick="continueLastCourse()">
                                        <i class="fas fa-play me-2"></i>Continue Learning
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="showAllCourses()">
                                        <i class="fas fa-search me-2"></i>Browse Courses
                                    </button>
                                </div>
                            </div>
                            <div class="col-lg-4 text-center">
                                <div class="achievement-display">
                                    <i class="fas fa-medal fa-3x text-warning mb-2"></i>
                                    <h5 id="currentLevel">Beginner</h5>
                                    <p class="text-muted mb-0">Current Level</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Current Learning -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title mb-0">
                                        <i class="fas fa-book-open me-2"></i>Continue Learning
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div id="currentCourses" class="row">
                                        <!-- Dynamically populated -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recommended Courses -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title mb-0">
                                        <i class="fas fa-star me-2"></i>Recommended for You
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div id="recommendedCourses" class="row">
                                        <!-- Dynamically populated -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Achievements -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title mb-0">
                                        <i class="fas fa-trophy me-2"></i>Recent Achievements
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div id="recentAchievements" class="achievement-list">
                                        <!-- Dynamically populated -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Course Catalog -->
                <div id="catalogView" class="content-view" style="display: none;">
                    <div class="catalog-header mb-4">
                        <div class="row align-items-center">
                            <div class="col-lg-6">
                                <h3>Course Catalog</h3>
                                <p class="text-muted">Explore our comprehensive learning library</p>
                            </div>
                            <div class="col-lg-6">
                                <div class="search-filters">
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="courseSearch" placeholder="Search courses...">
                                        <button class="btn btn-outline-secondary" type="button">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Filter Bar -->
                    <div class="filter-bar mb-4">
                        <div class="row">
                            <div class="col-md-3">
                                <select class="form-select" id="difficultyFilter">
                                    <option value="">All Levels</option>
                                    <option value="beginner">Beginner</option>
                                    <option value="intermediate">Intermediate</option>
                                    <option value="advanced">Advanced</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="durationFilter">
                                    <option value="">Any Duration</option>
                                    <option value="short">Under 1 hour</option>
                                    <option value="medium">1-3 hours</option>
                                    <option value="long">3+ hours</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="sortFilter">
                                    <option value="popular">Most Popular</option>
                                    <option value="newest">Newest</option>
                                    <option value="rating">Highest Rated</option>
                                    <option value="duration">Duration</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <button class="btn btn-outline-primary w-100" onclick="clearFilters()">
                                    <i class="fas fa-filter me-2"></i>Clear Filters
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Course Grid -->
                    <div id="courseGrid" class="row">
                        <!-- Dynamically populated -->
                    </div>
                </div>

                <!-- Course Player -->
                <div id="playerView" class="content-view" style="display: none;">
                    <div class="course-player-container">
                        <!-- Course Header -->
                        <div class="course-header mb-4">
                            <button class="btn btn-outline-secondary mb-3" onclick="backToCatalog()">
                                <i class="fas fa-arrow-left me-2"></i>Back to Courses
                            </button>
                            <div class="row">
                                <div class="col-lg-8">
                                    <h3 id="courseTitle">Course Title</h3>
                                    <p id="courseDescription" class="text-muted">Course description...</p>
                                    <div class="course-meta">
                                        <span class="badge bg-primary" id="courseDifficulty">Beginner</span>
                                        <span class="badge bg-success ms-2" id="courseDuration">2 hours</span>
                                        <span class="badge bg-info ms-2" id="coursePoints">+100 points</span>
                                    </div>
                                </div>
                                <div class="col-lg-4 text-end">
                                    <div class="course-progress-display">
                                        <div class="progress mb-2">
                                            <div class="progress-bar" id="courseProgressBar" style="width: 0%"></div>
                                        </div>
                                        <small class="text-muted">Progress: <span id="courseProgressText">0%</span></small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Course Content -->
                        <div class="row">
                            <div class="col-lg-8">
                                <!-- Video Player -->
                                <div class="video-container mb-4">
                                    <video
                                        id="courseVideo"
                                        class="video-js vjs-default-skin"
                                        controls
                                        preload="auto"
                                        width="100%"
                                        height="400"
                                        data-setup="{}">
                                        <source id="videoSource" src="" type="video/mp4">
                                        <p class="vjs-no-js">
                                            To view this video please enable JavaScript, and consider upgrading to a web browser that
                                            <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>.
                                        </p>
                                    </video>
                                </div>

                                <!-- Course Materials -->
                                <div class="course-materials">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="card-title mb-0">Course Materials</h6>
                                        </div>
                                        <div class="card-body">
                                            <div id="courseMaterials">
                                                <!-- Dynamically populated -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-4">
                                <!-- Course Outline -->
                                <div class="course-outline">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="card-title mb-0">Course Outline</h6>
                                        </div>
                                        <div class="card-body p-0">
                                            <div id="courseOutline" class="lesson-list">
                                                <!-- Dynamically populated -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Notes -->
                                <div class="course-notes mt-3">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="card-title mb-0">My Notes</h6>
                                        </div>
                                        <div class="card-body">
                                            <textarea id="courseNotes" class="form-control" rows="8" placeholder="Take notes..."></textarea>
                                            <button class="btn btn-sm btn-primary mt-2 w-100" onclick="saveNotes()">
                                                <i class="fas fa-save me-2"></i>Save Notes
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Assessment View -->
                <div id="assessmentView" class="content-view" style="display: none;">
                    <div class="assessment-container">
                        <div class="assessment-header mb-4">
                            <h3 id="assessmentTitle">Course Assessment</h3>
                            <p id="assessmentDescription" class="text-muted">Complete this assessment to earn your certificate</p>
                            <div class="assessment-info">
                                <span class="badge bg-warning">
                                    <i class="fas fa-clock me-1"></i>
                                    <span id="assessmentTime">30 minutes</span>
                                </span>
                                <span class="badge bg-info ms-2">
                                    <i class="fas fa-question-circle me-1"></i>
                                    <span id="assessmentQuestions">20 questions</span>
                                </span>
                                <span class="badge bg-success ms-2">
                                    <i class="fas fa-percentage me-1"></i>
                                    Passing: 80%
                                </span>
                            </div>
                        </div>

                        <div id="assessmentContent">
                            <!-- Dynamically populated -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Assessment Result Modal -->
    <div class="modal fade" id="resultModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Assessment Results</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <div id="resultContent">
                        <!-- Dynamically populated -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="viewCertificate" style="display: none;">
                        <i class="fas fa-certificate me-2"></i>View Certificate
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/video.js@8.0.4/dist/video.min.js"></script>
    <script src="js/lms-portal.js"></script>
</body>
</html>