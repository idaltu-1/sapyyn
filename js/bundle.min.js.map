{"version":3,"file":"bundle.min.js","sources":["main.js"],"sourcesContent":["// Sapyyn Patient Referral System - Main JavaScript\n// Copyright (c) 2025 Sapyyn. All rights reserved.\n\n// Global variables and configuration\nconst SapyynApp = {\n    apiUrl: '/api',\n    version: '1.0.0',\n    debug: true,\n    year: 2025\n};\n\n// Utility functions\nconst Utils = {\n    // Format file size\n    formatFileSize(bytes) {\n        if (bytes === 0) return '0 Bytes';\n        const k = 1024;\n        const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n\n    // Format date\n    formatDate(dateString) {\n        const options = { \n            year: 'numeric', \n            month: 'short', \n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        };\n        return new Date(dateString).toLocaleDateString('en-US', options);\n    },\n\n    // Debounce function\n    debounce(func, wait) {\n        let timeout;\n        return function executedFunction(...args) {\n            const later = () => {\n                clearTimeout(timeout);\n                func(...args);\n            };\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n        };\n    },\n\n    // Show toast notification\n    showToast(message, type = 'info') {\n        const toastContainer = document.getElementById('toastContainer') || this.createToastContainer();\n        \n        const toast = document.createElement('div');\n        toast.className = `toast align-items-center text-white bg-${type} border-0`;\n        toast.setAttribute('role', 'alert');\n        toast.setAttribute('aria-live', 'assertive');\n        toast.setAttribute('aria-atomic', 'true');\n        \n        toast.innerHTML = `\n            <div class=\"d-flex\">\n                <div class=\"toast-body\">\n                    ${message}\n                </div>\n                <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" \n                        data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n            </div>\n        `;\n        \n        toastContainer.appendChild(toast);\n        \n        const bsToast = new bootstrap.Toast(toast);\n        bsToast.show();\n        \n        // Remove toast after it's hidden\n        toast.addEventListener('hidden.bs.toast', () => {\n            toast.remove();\n        });\n    },\n\n    // Create toast container if it doesn't exist\n    createToastContainer() {\n        const container = document.createElement('div');\n        container.id = 'toastContainer';\n        container.className = 'toast-container position-fixed bottom-0 end-0 p-3';\n        container.style.zIndex = '9999';\n        document.body.appendChild(container);\n        return container;\n    },\n\n    // Loading overlay\n    showLoading() {\n        if (document.getElementById('loadingOverlay')) return;\n        \n        const overlay = document.createElement('div');\n        overlay.id = 'loadingOverlay';\n        overlay.className = 'loading-overlay';\n        overlay.innerHTML = `\n            <div class=\"text-center\">\n                <div class=\"loading-spinner\"></div>\n                <p class=\"mt-3 text-muted\">Loading...</p>\n            </div>\n        `;\n        document.body.appendChild(overlay);\n    },\n\n    hideLoading() {\n        const overlay = document.getElementById('loadingOverlay');\n        if (overlay) {\n            overlay.remove();\n        }\n    }\n};\n\n// File upload functionality\nconst FileUpload = {\n    init() {\n        this.setupDragAndDrop();\n        this.setupFileValidation();\n    },\n\n    setupDragAndDrop() {\n        const uploadArea = document.querySelector('.file-upload-area');\n        if (!uploadArea) return;\n\n        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\n            uploadArea.addEventListener(eventName, this.preventDefaults, false);\n            document.body.addEventListener(eventName, this.preventDefaults, false);\n        });\n\n        ['dragenter', 'dragover'].forEach(eventName => {\n            uploadArea.addEventListener(eventName, this.highlight.bind(this), false);\n        });\n\n        ['dragleave', 'drop'].forEach(eventName => {\n            uploadArea.addEventListener(eventName, this.unhighlight.bind(this), false);\n        });\n\n        uploadArea.addEventListener('drop', this.handleDrop.bind(this), false);\n    },\n\n    preventDefaults(e) {\n        e.preventDefault();\n        e.stopPropagation();\n    },\n\n    highlight(e) {\n        e.target.classList.add('dragover');\n    },\n\n    unhighlight(e) {\n        e.target.classList.remove('dragover');\n    },\n\n    handleDrop(e) {\n        const dt = e.dataTransfer;\n        const files = dt.files;\n        \n        if (files.length > 0) {\n            const fileInput = document.getElementById('file');\n            if (fileInput) {\n                fileInput.files = files;\n                this.handleFileSelect(files[0]);\n            }\n        }\n    },\n\n    setupFileValidation() {\n        const fileInput = document.getElementById('file');\n        if (!fileInput) return;\n\n        fileInput.addEventListener('change', (e) => {\n            if (e.target.files.length > 0) {\n                this.handleFileSelect(e.target.files[0]);\n            }\n        });\n    },\n\n    handleFileSelect(file) {\n        if (!this.validateFile(file)) return;\n\n        this.showFilePreview(file);\n        Utils.showToast(`File \"${file.name}\" selected successfully`, 'success');\n    },\n\n    validateFile(file) {\n        const maxSize = 16 * 1024 * 1024; // 16MB\n        const allowedTypes = [\n            'application/pdf',\n            'application/msword',\n            'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n            'text/plain',\n            'image/png',\n            'image/jpeg',\n            'image/jpg',\n            'image/gif',\n            'application/vnd.ms-excel',\n            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n        ];\n\n        if (file.size > maxSize) {\n            Utils.showToast('File size must be less than 16MB', 'danger');\n            return false;\n        }\n\n        if (!allowedTypes.includes(file.type)) {\n            Utils.showToast('File type not supported', 'danger');\n            return false;\n        }\n\n        return true;\n    },\n\n    showFilePreview(file) {\n        const preview = document.getElementById('filePreview');\n        if (!preview) return;\n\n        const previewContent = preview.querySelector('#previewContent');\n        if (!previewContent) return;\n\n        let content = `\n            <div class=\"d-flex align-items-center\">\n                <div class=\"me-3\">\n                    ${this.getFileIcon(file.type)}\n                </div>\n                <div>\n                    <div class=\"fw-semibold\">${file.name}</div>\n                    <div class=\"text-muted small\">\n                        Size: ${Utils.formatFileSize(file.size)} | \n                        Type: ${file.type || 'Unknown'}\n                    </div>\n                </div>\n            </div>\n        `;\n\n        if (file.type.startsWith('image/')) {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                content += `\n                    <div class=\"mt-3\">\n                        <img src=\"${e.target.result}\" alt=\"Preview\" class=\"img-thumbnail\" style=\"max-height: 200px;\">\n                    </div>\n                `;\n                previewContent.innerHTML = content;\n            };\n            reader.readAsDataURL(file);\n        } else {\n            previewContent.innerHTML = content;\n        }\n\n        preview.style.display = 'block';\n    },\n\n    getFileIcon(type) {\n        const iconMap = {\n            'application/pdf': '<i class=\"bi bi-file-pdf text-danger fs-1\"></i>',\n            'application/msword': '<i class=\"bi bi-file-word text-primary fs-1\"></i>',\n            'application/vnd.openxmlformats-officedocument.wordprocessingml.document': '<i class=\"bi bi-file-word text-primary fs-1\"></i>',\n            'text/plain': '<i class=\"bi bi-file-text text-secondary fs-1\"></i>',\n            'application/vnd.ms-excel': '<i class=\"bi bi-file-excel text-success fs-1\"></i>',\n            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': '<i class=\"bi bi-file-excel text-success fs-1\"></i>'\n        };\n\n        if (type.startsWith('image/')) {\n            return '<i class=\"bi bi-file-image text-info fs-1\"></i>';\n        }\n\n        return iconMap[type] || '<i class=\"bi bi-file-earmark text-muted fs-1\"></i>';\n    }\n};\n\n// Dashboard functionality\nconst Dashboard = {\n    init() {\n        this.loadStats();\n        this.setupAutoRefresh();\n    },\n\n    loadStats() {\n        fetch('/api/stats')\n            .then(response => response.json())\n            .then(data => {\n                this.updateStatCards(data);\n                this.updateCharts(data);\n            })\n            .catch(error => {\n                console.error('Error loading stats:', error);\n                Utils.showToast('Failed to load dashboard statistics', 'danger');\n            });\n    },\n\n    updateStatCards(data) {\n        const pendingElement = document.getElementById('pendingCount');\n        const approvedElement = document.getElementById('approvedCount');\n\n        if (pendingElement) {\n            pendingElement.textContent = data.status_counts?.pending || 0;\n        }\n        if (approvedElement) {\n            approvedElement.textContent = data.status_counts?.approved || 0;\n        }\n    },\n\n    updateCharts(data) {\n        // Implement chart updates if needed\n        console.log('Charts data:', data);\n    },\n\n    setupAutoRefresh() {\n        // Refresh dashboard every 5 minutes\n        setInterval(() => {\n            this.loadStats();\n        }, 5 * 60 * 1000);\n    }\n};\n\n// Search and filter functionality\nconst Search = {\n    init() {\n        this.setupDocumentSearch();\n        this.setupReferralSearch();\n    },\n\n    setupDocumentSearch() {\n        const searchInput = document.getElementById('searchDocuments');\n        const filterSelect = document.getElementById('filterType');\n\n        if (searchInput) {\n            searchInput.addEventListener('input', Utils.debounce(() => {\n                this.filterDocuments();\n            }, 300));\n        }\n\n        if (filterSelect) {\n            filterSelect.addEventListener('change', () => {\n                this.filterDocuments();\n            });\n        }\n    },\n\n    setupReferralSearch() {\n        const searchInput = document.getElementById('searchReferrals');\n        if (searchInput) {\n            searchInput.addEventListener('input', Utils.debounce(() => {\n                this.filterReferrals();\n            }, 300));\n        }\n    },\n\n    filterDocuments() {\n        const searchTerm = document.getElementById('searchDocuments')?.value.toLowerCase() || '';\n        const filterType = document.getElementById('filterType')?.value || '';\n        const documents = document.querySelectorAll('.document-item');\n\n        let visibleCount = 0;\n\n        documents.forEach(doc => {\n            const name = doc.dataset.name || '';\n            const type = doc.dataset.type || '';\n\n            const matchesSearch = !searchTerm || name.includes(searchTerm);\n            const matchesFilter = !filterType || type === filterType;\n\n            if (matchesSearch && matchesFilter) {\n                doc.style.display = 'block';\n                visibleCount++;\n            } else {\n                doc.style.display = 'none';\n            }\n        });\n\n        // Update results counter\n        this.updateResultsCounter(visibleCount, documents.length);\n    },\n\n    filterReferrals() {\n        // Implement referral filtering\n        console.log('Filtering referrals...');\n    },\n\n    updateResultsCounter(visible, total) {\n        let counter = document.getElementById('resultsCounter');\n        if (!counter) {\n            counter = document.createElement('div');\n            counter.id = 'resultsCounter';\n            counter.className = 'text-muted small mt-2';\n            \n            const searchContainer = document.getElementById('searchDocuments')?.parentNode;\n            if (searchContainer) {\n                searchContainer.appendChild(counter);\n            }\n        }\n        \n        counter.textContent = `Showing ${visible} of ${total} documents`;\n    }\n};\n\n// Form validation and enhancement\nconst Forms = {\n    init() {\n        this.setupFormValidation();\n        this.setupAutoSave();\n    },\n\n    setupFormValidation() {\n        const forms = document.querySelectorAll('form[data-validate]');\n        forms.forEach(form => {\n            form.addEventListener('submit', (e) => {\n                if (!this.validateForm(form)) {\n                    e.preventDefault();\n                }\n            });\n        });\n    },\n\n    validateForm(form) {\n        const requiredFields = form.querySelectorAll('[required]');\n        let isValid = true;\n\n        requiredFields.forEach(field => {\n            if (!field.value.trim()) {\n                this.showFieldError(field, 'This field is required');\n                isValid = false;\n            } else {\n                this.clearFieldError(field);\n            }\n        });\n\n        return isValid;\n    },\n\n    showFieldError(field, message) {\n        field.classList.add('is-invalid');\n        \n        let feedback = field.parentNode.querySelector('.invalid-feedback');\n        if (!feedback) {\n            feedback = document.createElement('div');\n            feedback.className = 'invalid-feedback';\n            field.parentNode.appendChild(feedback);\n        }\n        feedback.textContent = message;\n    },\n\n    clearFieldError(field) {\n        field.classList.remove('is-invalid');\n        const feedback = field.parentNode.querySelector('.invalid-feedback');\n        if (feedback) {\n            feedback.remove();\n        }\n    },\n\n    setupAutoSave() {\n        const forms = document.querySelectorAll('form[data-autosave]');\n        forms.forEach(form => {\n            form.addEventListener('input', Utils.debounce(() => {\n                this.autoSave(form);\n            }, 2000));\n        });\n    },\n\n    autoSave(form) {\n        const formData = new FormData(form);\n        const data = Object.fromEntries(formData);\n        const formId = form.id || 'form';\n        \n        localStorage.setItem(`autosave_${formId}`, JSON.stringify(data));\n        Utils.showToast('Draft saved automatically', 'info');\n    }\n};\n\n// QR Code functionality\nconst QRCode = {\n    generate(data, containerId) {\n        // This would integrate with a QR code library\n        console.log('Generating QR code for:', data);\n        \n        const container = document.getElementById(containerId);\n        if (container) {\n            container.innerHTML = `\n                <div class=\"qr-code-container\">\n                    <div class=\"placeholder bg-light p-4 text-center\">\n                        <i class=\"bi bi-qr-code fs-1 text-muted\"></i>\n                        <p class=\"mt-2 text-muted\">QR Code would be generated here</p>\n                    </div>\n                </div>\n            `;\n        }\n    },\n\n    download(qrCodeData, filename = 'qr-code.png') {\n        // Create download link for QR code\n        const link = document.createElement('a');\n        link.download = filename;\n        link.href = `data:image/png;base64,${qrCodeData}`;\n        link.click();\n    }\n};\n\n// Notification system\nconst Notifications = {\n    init() {\n        this.checkPermission();\n        this.setupServiceWorker();\n    },\n\n    checkPermission() {\n        if ('Notification' in window && Notification.permission === 'default') {\n            Notification.requestPermission();\n        }\n    },\n\n    show(title, options = {}) {\n        if ('Notification' in window && Notification.permission === 'granted') {\n            new Notification(title, {\n                icon: '/static/images/logo.png',\n                badge: '/static/images/badge.png',\n                ...options\n            });\n        } else {\n            Utils.showToast(title, 'info');\n        }\n    },\n\n    setupServiceWorker() {\n        if ('serviceWorker' in navigator) {\n            navigator.serviceWorker.register('/static/js/sw.js')\n                .then(registration => {\n                    console.log('Service Worker registered:', registration);\n                })\n                .catch(error => {\n                    console.log('Service Worker registration failed:', error);\n                });\n        }\n    }\n};\n\n// Initialize application\ndocument.addEventListener('DOMContentLoaded', function() {\n    console.log('Sapyyn App initialized');\n    \n    // Initialize modules\n    FileUpload.init();\n    Dashboard.init();\n    Search.init();\n    Forms.init();\n    Notifications.init();\n    \n    // Setup global event listeners\n    setupGlobalEventListeners();\n    \n    // Setup theme handling\n    setupThemeHandling();\n});\n\n// Global event listeners\nfunction setupGlobalEventListeners() {\n    // Handle all modal events\n    document.addEventListener('show.bs.modal', function(e) {\n        console.log('Modal opening:', e.target.id);\n    });\n    \n    // Handle form submissions\n    document.addEventListener('submit', function(e) {\n        const form = e.target;\n        if (form.tagName === 'FORM') {\n            Utils.showLoading();\n        }\n    });\n    \n    // Handle page unload\n    window.addEventListener('beforeunload', function(e) {\n        // Check for unsaved changes\n        const hasUnsavedChanges = localStorage.getItem('hasUnsavedChanges');\n        if (hasUnsavedChanges === 'true') {\n            e.preventDefault();\n            e.returnValue = '';\n        }\n    });\n}\n\n// Theme handling\nfunction setupThemeHandling() {\n    const themeToggle = document.getElementById('themeToggle');\n    if (themeToggle) {\n        themeToggle.addEventListener('click', function() {\n            const currentTheme = document.documentElement.getAttribute('data-theme');\n            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';\n            \n            document.documentElement.setAttribute('data-theme', newTheme);\n            localStorage.setItem('theme', newTheme);\n        });\n    }\n    \n    // Load saved theme\n    const savedTheme = localStorage.getItem('theme');\n    if (savedTheme) {\n        document.documentElement.setAttribute('data-theme', savedTheme);\n    }\n}\n\n// Export functions for global use\nwindow.SapyynApp = SapyynApp;\nwindow.Utils = Utils;\nwindow.FileUpload = FileUpload;\nwindow.Dashboard = Dashboard;\nwindow.Search = Search;\nwindow.Forms = Forms;\nwindow.QRCode = QRCode;\nwindow.Notifications = Notifications;"],"names":["Utils","formatFileSize","bytes","i","Math","floor","log","parseFloat","pow","toFixed","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","debounce","func","wait","timeout","args","clearTimeout","setTimeout","showToast","message","type","toastContainer","document","getElementById","this","createToastContainer","toast","createElement","className","setAttribute","innerHTML","appendChild","bootstrap","Toast","show","addEventListener","remove","container","id","style","zIndex","body","showLoading","overlay","hideLoading","FileUpload","init","setupDragAndDrop","setupFileValidation","uploadArea","querySelector","forEach","eventName","preventDefaults","highlight","bind","unhighlight","handleDrop","e","preventDefault","stopPropagation","target","classList","add","files","dataTransfer","length","fileInput","handleFileSelect","file","validateFile","showFilePreview","name","size","includes","preview","previewContent","content","getFileIcon","startsWith","reader","FileReader","onload","result","readAsDataURL","display","Dashboard","loadStats","setupAutoRefresh","fetch","then","response","json","data","updateStatCards","updateCharts","catch","error","pendingElement","approvedElement","textContent","status_counts","pending","approved","setInterval","Search","setupDocumentSearch","setupReferralSearch","searchInput","filterSelect","filterDocuments","filterReferrals","searchTerm","value","toLowerCase","filterType","documents","querySelectorAll","visibleCount","doc","dataset","updateResultsCounter","visible","total","counter","searchContainer","parentNode","Forms","setupFormValidation","setupAutoSave","form","validateForm","requiredFields","isValid","field","trim","clearFieldError","showFieldError","feedback","autoSave","formData","FormData","Object","fromEntries","formId","localStorage","setItem","JSON","stringify","QRCode","generate","containerId","download","qrCodeData","filename","link","href","click","Notifications","checkPermission","setupServiceWorker","window","Notification","permission","requestPermission","title","options","icon","badge","navigator","serviceWorker","register","registration","tagName","getItem","returnValue","themeToggle","newTheme","documentElement","getAttribute","savedTheme","setupThemeHandling","SapyynApp","apiUrl","version","debug"],"mappings":"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"}